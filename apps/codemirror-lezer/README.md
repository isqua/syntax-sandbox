# codemirror-lezer

The application demonstrates how to create custom Query Language for CodeMirror using [the Lezer Parser System](https://lezer.codemirror.net/).

Start:

```
pnpm run dev
```

Rebuild grammar:

```
pnpm run grammar
```

Run tests:

```
pnpm test
```

## Overview

1. [main.ts](./src/main.ts) is an entrypoint. It finds the root DOM element and render the app.
1. [language](./src/language) contains a set of CodeMirror plugins that implement work with the query language defined in Grammar
    1. [grammar](./src/language/grammar) contains everything about parsing a text to an AST
        1. [QueryLanguage.grammar](./src/language/grammar/QueryLanguage.grammar) grammar definition in terms of [The Lezer Parser System](https://lezer.codemirror.net/). The parser itself is autogenerated based on the grammar file.
    1. [query](./src/language/query/query.ts) a helper to transform AST to query tree, it helps to visualize the parsing result and [test](./src/language/query/query.spec.ts) the parser
    1. [highlighter](./src/language/highlighter) highlights different semantic tokens with different colors
    1. [linter](./src/language/linter) shows errors for improper tokens
    1. [decorator](./src/language/decorator) shows user-defined widgets for some tokens
    1. [autocomplete](./src/language/autocomplete) suggests related tokens to a user
    1. [language](./src/language/language) combines them all
